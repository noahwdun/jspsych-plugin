var jsPsychPluginMovingDots2=function(l){"use strict";var P="0.0.1";const w={name:"plugin-moving-dots-2",version:P,parameters:{control_levels:{type:l.ParameterType.INT,array:!0,default:[30,70,100]},dot_count:{type:l.ParameterType.INT,default:10},flash_duration:{type:l.ParameterType.INT,default:200},trial_duration:{type:l.ParameterType.INT,default:5e3},initial_control_level:{type:l.ParameterType.INT,default:100},control_change_level:{type:l.ParameterType.INT,default:30},playback:{type:l.ParameterType.OBJECT,array:!0,default:[]}},data:{control_change:{type:l.ParameterType.INT}},citations:"__CITATIONS__"};class y{constructor(d){this.jsPsych=d}trial(d,r){const t=document.createElement("canvas");t.width=800,t.height=600,d.appendChild(t);const e=t.getContext("2d"),I=100,c=[];for(let n=0;n<r.dot_count;n++){const o=Math.random()*2*Math.PI,a=Math.random()*I;c.push({x:t.width/2+a*Math.cos(o),y:t.height/2+a*Math.sin(o),control:r.initial_control_level})}const h=0,s=r.control_change_level,M=2500+Math.random()*500;let i=null,T=!1;const g=[],N=()=>{e.clearRect(0,0,t.width,t.height),e.beginPath(),e.moveTo(t.width/2-10,t.height/2),e.lineTo(t.width/2+10,t.height/2),e.moveTo(t.width/2,t.height/2-10),e.lineTo(t.width/2,t.height/2+10),e.strokeStyle="black",e.lineWidth=2,e.stroke(),c.forEach((n,o)=>{e.beginPath(),e.arc(n.x,n.y,5,0,2*Math.PI),i&&Date.now()-i<r.flash_duration?e.fillStyle=o===h?"red":"black":e.fillStyle="black",e.fill()})};let u=0,_=0,f=0,m=0,v=!0;t.addEventListener("mousemove",n=>{const o=n.offsetX,a=n.offsetY;v?(u=o,_=a,v=!1):(f=o-u,m=a-_,u=o,_=a)});const b=(n,o)=>{c.forEach((a,E)=>{a.x+=n*(a.control/100),a.y+=o*(a.control/100)})};let D=Date.now();const p=()=>{const n=Date.now(),o=n-D,a=o;o>=M&&!i&&(i=Date.now()),i&&Date.now()-i>=r.flash_duration&&(T||(r.initial_control_level===100?c[h].control=c[h].control-s:r.initial_control_level===0&&(c[h].control=c[h].control+s),T=!0)),i&&Date.now()-i<1500?(b(f,m),N(),g.push({dx:f,dy:m,t:a}),requestAnimationFrame(p)):k()};p();const k=()=>{d.innerHTML="",this.jsPsych.finishTrial({control_change:s,mouse_data:g})}}}return y.info=w,y}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
